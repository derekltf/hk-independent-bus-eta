"use strict";(self.webpackChunkhk_independent_bus_eta=self.webpackChunkhk_independent_bus_eta||[]).push([[4],{4004:function(t,n,e){e.r(n);var o=e(4942),a=e(9439),c=e(7313),i=e(3265),r=e(7829),l=e(9099),u=e(5281),s=e(1445),d=e(8564),f=e(4511),g=e(3475),m=e.n(g),p=e(3155),b=e.n(p),h=e(5823),x=e(7440),C=e(6417);n.default=function(t){var n=t.id,e=t.route,o=t.idx,s=void 0===o?-1:o,d=t.dest,g=t.stop,p=t.setIsCopied,Z=t.event,j=(0,c.useState)(!1),v=(0,a.Z)(j,2),I=v[0],P=v[1],w=(0,c.useContext)(x.Z),E=w.AppTitle,N=w.colorMode,_=(0,f.$)(),B=_.t,F=_.i18n,J=(0,c.useState)(""),M=(0,a.Z)(J,2),S=M[0],A=M[1];(0,c.useEffect)((function(){!1!==I&&Promise.all([m().toPng(document.getElementById("route-eta-header"),{bgcolor:"light"===N?"#fedb00":"#000"}),document.getElementById("route-map")&&m().toPng(document.getElementById("route-map")),m().toPng(document.getElementById("stop-".concat(s)))]).then((function(t){return b()(t.filter((function(t){return t})).map((function(t){return t.substr(22)})),{direction:!0,isPng:!0})})).then((function(t){A(t)}))}),[I]),(0,c.useEffect)((function(){P(!0)}),[Z]);var D=(0,c.useCallback)((function(){(0,h.I)("https://".concat(window.location.hostname,"/").concat(F.language,"/route/").concat(n),"".concat(s+1,". ").concat((0,h.iF)(g.name[F.language])," - ").concat(e," ").concat(B("\u5f80")," ").concat((0,h.iF)(d[F.language])," - ").concat(B(E))).then((function(){navigator.clipboard&&p(!0)})).finally((function(){P(!1)}))}),[h.I,F.language,n,s,g.name,e]),T=(0,c.useCallback)((function(){(0,h.JP)(S,"https://".concat(window.location.hostname,"/").concat(F.language,"/route/").concat(n),"".concat(s+1,". ").concat((0,h.iF)(g.name[F.language])," - ").concat(e," ").concat(B("\u5f80")," ").concat((0,h.iF)(d[F.language])," - https://hkbus.app/")).then((function(){navigator.clipboard&&p(!0)})).finally((function(){P(!1)}))}),[h.JP,S,F.language,n,s,e]);return(0,C.jsx)(y,{className:k.root,onClose:function(){return P(!1)},open:I,children:(0,C.jsxs)(i.Z,{maxWidth:"xs",className:k.container,children:[S&&(0,C.jsxs)(r.Z,{className:k.boxContainer,children:[(0,C.jsx)("img",{src:S,style:{width:"100%"},alt:""}),(0,C.jsxs)(r.Z,{className:k.buttonContainer,children:[(0,C.jsx)(l.Z,{className:k.button,onClick:D,children:B("\u4ee5\u93c8\u7d50\u5206\u4eab")}),(0,C.jsx)(l.Z,{className:k.button,onClick:T,children:B("\u4ee5\u5716\u7247\u5206\u4eab")})]})]}),!S&&(0,C.jsx)(u.Z,{color:"inherit"})]})})};var Z="sharingModal",k={root:"".concat(Z,"-root"),container:"".concat(Z,"-container"),boxContainer:"".concat(Z,"-boxContainer"),buttonContainer:"".concat(Z,"-buttonContainer"),button:"".concat(Z,"-button")},y=(0,d.ZP)(s.Z)((function(t){var n,e=t.theme;return n={},(0,o.Z)(n,"&.".concat(k.root),{display:"flex",alignItems:"center"}),(0,o.Z)(n,"& .".concat(k.container),{display:"flex",justifyContent:"center",outline:"none"}),(0,o.Z)(n,"& .".concat(k.boxContainer),{display:"flex",flexDirection:"column",justifyContent:"center"}),(0,o.Z)(n,"& .".concat(k.buttonContainer),{display:"flex",backgroundColor:"dark"===e.palette.mode?e.palette.background.default:"#fedb00"}),(0,o.Z)(n,"& .".concat(k.button),{flex:1,border:"1px solid rgba(255, 255, 255, 0.3)",color:"dark"===e.palette.mode?e.palette.primary.main:e.palette.text.primary}),n}))}}]);